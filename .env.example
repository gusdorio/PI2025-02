# Database Configuration
# Copy this file to .env and update with your actual values

# MongoDB Configuration
MONGO_HOST=localhost
MONGO_PORT=27017
MONGO_DATABASE=pi2502
MONGO_USER=root
MONGO_PASSWORD=root_password123

# Environment
ENVIRONMENT=development

# Azure Global Configurations
RESOURCE_GROUP=
LOCATION=eastus2
ENVIRONMENT_NAME=
AZ_SUBSCRIPTION_ID=$(az account show --query id --output tsv)

# Azure Registry
ACR_NAME=
ACR_LOGIN_SERVER=${ACR_NAME}.azurecr.io
ACR_USERNAME=
ACR_PASSWORD=$(az acr credential show --name ${ACR_NAME} --query "passwords[0].value" --output tsv)
ACR_ID=$(az acr show --name ${ACR_NAME} --query id --output tsv)

# Azure Service Principal (for GitHub Actions authentication with Azure)
AZ_SP_NAME=github-actions-pi2025
AZ_SP_ID=$(az ad sp list --display-name ${AZ_SP_NAME} --query "[0].appId" --output tsv)
AZ_SP_SECRET=your-service-principal-password

# Azure CosmosDB
COSMOSDB_ACCOUNT=
COSMOSDB_HOST=${COSMOSDB_ACCOUNT}.mongo.cosmos.azure.com
COSMOSDB_PORT=10255
COSMOSDB_USER=
COSMOSDB_PASSWORD=$(az cosmosdb keys list --name ${COSMOSDB_ACCOUNT} --resource-group ${RESOURCE_GROUP} --query "primaryMasterKey" --output tsv)
COSMOSDB_DATABASE=pi2025

# CosmosDB Connection Settings
MONGO_TLS=true
MONGO_AUTH_SOURCE=admin
MONGO_CONNECT_TIMEOUT=30000
MONGO_SOCKET_TIMEOUT=30000
MONGO_SERVER_TIMEOUT=30000

# MongoDB Connection String (takes precedence over individual settings)
MONGO_URI=mongodb://${COSMOSDB_USER}:${COSMOSDB_PASSWORD}@${COSMOSDB_HOST}:${COSMOSDB_PORT}/${COSMOSDB_DATABASE}?ssl=true&replicaSet=globaldb&retrywrites=false&maxIdleTimeMS=120000appName=@${COSMOSDB_ACCOUNT}@

# Azure Container Apps
ML_MODEL_URL=$(az containerapp show --name ml-model --resource-group $RESOURCE_GROUP --query "properties.configuration.ingress.fqdn" --output tsv)
DASHBOARD_URL=$(az containerapp show --name dashboard --resource-group $RESOURCE_GROUP --query "properties.configuration.ingress.fqdn" --output tsv)